var HKCommentClient={resizeCommentBox:function(e){document.querySelector("#hk-comment-client").style.height=e+"px"},postMessage:function(e){if(e.origin.indexOf("//comment.hankyung.com")<0)return!1;switch(e.data.type){case"resize":HKCommentClient.resizeCommentBox(e.data.height);break;case"userlist":HKCommentClient.userList(e.data.userno);break;case"userlistclose":HKCommentClient.removeLayer("hk-comment-client-user");break;case"policy":HKCommentClient.createLayer("/html/policy.html","hk-comment-client-policy");break;case"commentloginview":HKCommentClient.createLayer("/html/login.html","hk-comment-client-login");break;case"commentloginmove":document.location.href="https://member.hankyung.com/apps.frame/login?url="+escape(document.location.href);break;case"commentalertview":HKCommentClient.createAlertLayer(e.data.msg,e.data.alertid);break;case"commentalertclose":HKCommentClient.removeLayer(e.data.alertid);break;case"commentcount":HKCommentClient.setCommentCount(e.data.count)}},commentBoxUrl:function(){var e=document.querySelector("title").text,t=document.location.href;document.querySelector('meta[property="og:title"]')?.content&&(e=document.querySelector('meta[property="og:title"]').content),document.querySelector('meta[property="og:url"]')?.content&&(t=document.querySelector('meta[property="og:url"]').content);var o="//comment.hankyung.com/view";return o+="?domain="+window.hkCommentOptions.domain+"&pagetype="+window.hkCommentOptions.type+"&pageid="+window.hkCommentOptions.pageid,o+="&title="+encodeURIComponent(e)+"&url="+encodeURIComponent(t),window.hkCommentOptions.sort&&(o+="&sort="+window.hkCommentOptions.sort),window.hkCommentOptions.limit&&(o+="&limit="+window.hkCommentOptions.limit),window.hkCommentOptions.theme&&(o+="&theme="+window.hkCommentOptions.theme),window.hkCommentOptions.lightmode&&(o+="&lightmode=true"),"news"==window.hkCommentOptions.type&&(o+="&section="+category,o+="&date="+postdate.substr(0,8)),o},commentBox:function(){if(!window.hkCommentOptions.domain)return console.log("domain error"),!1;if(!window.hkCommentOptions.type)return console.log("type error"),!1;if(!window.hkCommentOptions.pageid)return console.log("pageid error"),!1;const e=HKCommentClient.commentBoxUrl();var t=document.createElement("iframe");t.setAttribute("src",e),t.setAttribute("id","hk-comment-client"),t.setAttribute("scrolling","no"),t.setAttribute("title","comment"),t.style.minWidth="100%",t.style.width="100%",t.style.height="0px",t.style.overflow="hidden",t.style.border="0px",document.querySelector("#hk-comment-container").appendChild(t),t.onload=function(){}},userList:function(e){var t="/view/user";t+="?domain="+window.hkCommentOptions.domain,t+="&pageid="+window.hkCommentOptions.pageid,t+="&pagetype="+window.hkCommentOptions.type,t+="&userno="+e,window.hkCommentOptions.theme&&(t+="&theme="+window.hkCommentOptions.theme),window.hkCommentOptions.lightmode&&(t+="&lightmode=true"),HKCommentClient.createLayer(t,"hk-comment-client-user")},createAlertLayer:function(e,t="commentalert"){var o="/html/alert.html";o+="?msg="+encodeURI(e),o+="&alertid="+t,HKCommentClient.createLayer(o,t)},createLayer:function(e,t){var o="https://comment.hankyung.com"+e;o.indexOf("?")>0?o+="&v="+1e5*Math.floor(Date.now()/1e5):o+="?v="+1e5*Math.floor(Date.now()/1e5);var n=document.createElement("iframe");n.setAttribute("src",o),n.setAttribute("id",t),n.setAttribute("scrolling","no"),n.setAttribute("title","comment"),n.style.width="100%",n.style.height="100%",n.style.overflow="hidden",n.style.border="0px",n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.style.display="block",n.style.zIndex="99999999999",document.querySelector("body").appendChild(n),n.onload=function(){document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.height="100vh",document.querySelector("body").style.touchAction="none"}},removeLayer:function(e){var t=document.querySelector("#"+e);t.parentNode.removeChild(t),document.querySelector("body").style.overflow=null,document.querySelector("body").style.height=null,document.querySelector("body").style.touchAction=null},setCommentCount:function(e){Number(e)>99&&(e="99+");const t=document.querySelectorAll(".hk-comment-count");if(t.length>0)for(var o of t)o.textContent=e}};window.addEventListener("message",HKCommentClient.postMessage,!1),HKCommentClient.commentBox();